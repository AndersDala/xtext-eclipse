setpref targetPlatformPath="${build.root}/target.platform"
#setpref org.eclipse.buckminster.core.maxParallelResolutions=1
#setpref org.eclipse.buckminster.core.maxParallelMaterializations=1

importtargetdefinition "${releng.project.location}/api-baseline/api-baseline.target"
addbaseline -A "api-baseline"

import -Declipse.download="http://download.eclipse.org" "${releng.project.location}/releng/xtext-platform-${ECLIPSE.TARGET.ALIAS}.mspec"
resolve "${releng.project.location}/releng/xtext.cquery"
resolve "${releng.project.location}/releng/tests/xtext-test.mspec"
resolve "${releng.project.location}/releng/tests-xtend/xtend-test.mspec"

build

#junit --launch "org.eclipse.xtext.purexbase.tests/org.eclipse.xtext.purexbase.tests.launch" --flatXML --output "${WORKSPACE}/xtext.test.results/org.eclipse.xtext.purexbase.tests.xml"
#junit --launch "org.eclipse.xtend.ide.tests/xtend.ide.tests.fast.launch" --flatXML --output "${build.root}/xtend.test.results/xtend.ide.tests.fast.xml"

#perform --properties "${releng.project.location}/releng/xtext-build.properties" "org.eclipse.xtend.examples-container#zip.examples.content"
perform --properties "${releng.project.location}/releng/xtext-build.properties" "org.eclipse.xtext.build#package.tmf-xtext-Update"

#importtargetdefinition  -DuseMirror=true -A "${releng.project.location}/releng/tests/tests-Galileo.target


#build

#junit --launch "org.eclipse.xtext.common.types.tests/org.eclipse.xtext.common.types.tests.launch" --flatXML --output "${build.root}/xtext.test.results/org.eclipse.xtext.common.types.tests.xml"

#perform --properties "${releng.project.location}/releng/xtext-build.properties" "org.eclipse.xtext.releng#setup.promoter"
